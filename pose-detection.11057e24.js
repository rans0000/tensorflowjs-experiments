import"./camera-identify-p5.2aafa147.js";import"./camera-identify-p5.1c76dd51.js";var e=globalThis,t={},n={},o=e.parcelRequiread69;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},e.parcelRequiread69=o),o.register;var a=o("g73GA"),l=o("klb57");o("iUyUN"),o("5jdc5");var i=o("7Pz0b");let r=!0,s="",d=null,c=null,g=document.getElementById("loader");new(i&&i.__esModule?i.default:i)(e=>{async function t(e,t){return new Promise(async(n,o)=>{if(!c)return o(null);let a=(await c.detect(t)).filter(e=>"person"===e.class&&e.score>.7);if(a.length<1)return o(null);let l=a[0];e.loadImage(s,t=>{let[o,a,i,r]=l.bbox,s=i>r?i:r,d=o+i/2-s/2,c=a+r/2-s/2,g=e.createImage(192,192);return g.copy(t,d,c,s,s,0,0,192,192),e.image(g,0,0),n(g)})})}async function n(e){return new Promise(async(t,n)=>{if(!d)return n(null);await e.loadPixels();let o=new ImageData(new Uint8ClampedArray(e.pixels),e.width,e.height,{colorSpace:"srgb"}),a=await l.browser.fromPixels(o),i=await d.predict(l.expandDims(a));return t([await i.array(),e.width,e.height])})}async function o(){try{let e="indexeddb://models/movenet-singlepose-lightning";g.classList.replace("hidden","flex"),console.log("loading movenet model started..."),(await l.io.listModels()).hasOwnProperty(e)?d=await l.loadGraphModel(e):(d=await l.loadGraphModel("https://www.kaggle.com/models/google/movenet/tfJs/singlepose-lightning/4",{fromTFHub:!0}),await d.save(e)),console.log("loading movenet model done...")}catch(e){console.log("something went wrong while loading the pose model...",e)}finally{g.classList.replace("flex","hidden")}}async function i(){console.log("loading cocossd model started");try{g.classList.replace("hidden","flex"),c=await a.load(),console.log("loading cocossd model done")}catch(e){console.log("something went wrong while loading object detection model ...",e)}finally{g.classList.replace("flex","hidden")}}e.setup=async()=>{e.createCanvas(320,320).parent("app"),e.background("black"),e.pixelDensity(1),e.colorMode(e.RGB),e.noLoop(),function(o){var a=o;let l=document.getElementById("btn-camera"),i=document.getElementById("file-upload"),d=document.getElementById("file-info-label");function c(e){if(r=void 0!==e?e:!e){a.background("white"),a.noLoop();return}d.textContent="Browse files",a.loop()}i.addEventListener("change",function(o){let l=o.target;if(!l.files||l.files.length<1)return;s&&URL.revokeObjectURL(s);let i=l.files[0];if(!i.type.startsWith("image/"))throw"Only images can be uploaded!!";c(!0),s=URL.createObjectURL(i),d.textContent=i.name;let r=new Image;r.onload=async function(){try{let o=await t(a,this),[l,i,r]=await n(o);for(let t of l[0][0])e.noStroke(),e.fill(0,255,0),e.circle(t[1]*r,t[0]*i,5);e.redraw()}catch(e){console.log("error processing...",e)}},r.src=s}),l.addEventListener("click",e=>{e.preventDefault(),c(!1)})}(e),await o(),await i()},e.draw=async()=>{r||e.background(255)}});
//# sourceMappingURL=pose-detection.11057e24.js.map
