<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Pose Detection | TensorflowJS</title>
        <meta name="description" content="Multiple object detection using pre trained model in TensorFlow.js & p5.js" />
        <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />
        <link href="./index.css" type="text/css" rel="stylesheet" />
    </head>
    <body class="overflow-hidden pt-16">
        <h1
            class="fixed w-full top-0 h-16 px-6 flex justify-between items-center bg-white font-bold text-2xl border-b border-gray-200"
        >
            Pose detection
        </h1>
        <section>
            <div id="instructions" class="bg-gray-100 rounded-sm p-3 mb-3 mx-3">
                <p>Use either the camera or upload a file to detect poses</p>
                <div
                    class="flex flex-nowrap justify-around items-center rounded border border-gray-300 my-6 p-4 text-gray-900 shadow-sm sm:p-6"
                >
                    <label for="file-upload" class="flex flex-col items-center">
                        <svg
                            class="w-6 h-6 text-gray-800 dark:text-white"
                            aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            fill="none"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke="currentColor"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M12 5v9m-5 0H5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-2M8 9l4-5 4 5m1 8h.01"
                            />
                        </svg>

                        <span class="mt-4 font-medium">Upload an image</span>

                        <span
                            id="file-info-label"
                            class="cursor-pointer mt-2 inline-block rounded border border-gray-200 bg-gray-50 px-3 py-1.5 text-center text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-100"
                        >
                            Browse files
                        </span>

                        <input multiple type="file" id="file-upload" class="sr-only" accept=".png, .jpg, .jpeg" />
                    </label>
                    <div class="text-gray-400 font-bold size-1">or</div>
                    <div class="flex flex-col items-center">
                        <svg
                            class="w-6 h-6 text-gray-800 dark:text-white"
                            aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            fill="none"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke="currentColor"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M14 6H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1Zm7 11-6-2V9l6-2v10Z"
                            />
                        </svg>

                        <span class="mt-4 font-medium">Use Camera</span>
                        <button
                            id="btn-camera"
                            type="button"
                            class="cursor-pointer mt-2 inline-block rounded border border-gray-200 bg-gray-50 px-3 py-1.5 text-center text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-100"
                        >
                            Use Camera
                        </button>
                    </div>
                </div>
            </div>
            <div id="app" class="flex justify-center"></div>
        </section>
        <article id="gui"></article>
        <div id="loader" class="fixed inset-0 bg-black/40 pointer-none flex-col justify-center items-center hidden">
            <div class="w-12 h-12">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
                    <radialGradient id="a7" cx=".66" fx=".66" cy=".3125" fy=".3125" gradientTransform="scale(1.5)">
                        <stop offset="0" stop-color="#292937"></stop>
                        <stop offset=".3" stop-color="#292937" stop-opacity=".9"></stop>
                        <stop offset=".6" stop-color="#292937" stop-opacity=".6"></stop>
                        <stop offset=".8" stop-color="#292937" stop-opacity=".3"></stop>
                        <stop offset="1" stop-color="#292937" stop-opacity="0"></stop>
                    </radialGradient>
                    <circle
                        transform-origin="center"
                        fill="none"
                        stroke="url(#a7)"
                        stroke-width="18"
                        stroke-linecap="round"
                        stroke-dasharray="200 1000"
                        stroke-dashoffset="0"
                        cx="100"
                        cy="100"
                        r="70"
                    >
                        <animateTransform
                            type="rotate"
                            attributeName="transform"
                            calcMode="spline"
                            dur="2"
                            values="360;0"
                            keyTimes="0;1"
                            keySplines="0 0 1 1"
                            repeatCount="indefinite"
                        ></animateTransform>
                    </circle>
                    <circle
                        transform-origin="center"
                        fill="none"
                        opacity=".2"
                        stroke="#292937"
                        stroke-width="18"
                        stroke-linecap="round"
                        cx="100"
                        cy="100"
                        r="70"
                    ></circle>
                </svg>
            </div>
            <p class="text-white">loading AI model...</p>
        </div>
        <script type="module" src="./scripts/pose-detection.ts"></script>
    </body>
</html>
