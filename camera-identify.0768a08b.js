import"./camera-identify-p5.46bb039f.js";var e=globalThis,a={},i={},m=e.parcelRequiread69;null==m&&((m=function(e){if(e in a)return a[e].exports;if(e in i){var m=i[e];delete i[e];var d={id:e,exports:{}};return a[e]=d,m.call(d.exports,d,d.exports),d.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,a){i[e]=a},e.parcelRequiread69=m),(0,m.register)("g73GA",function(e,a){var i;e.exports,function(e,a,i){let m={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class d{constructor(e,a){this.modelPath=a||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(e)}/model.json`}getPrefix(e){return"lite_mobilenet_v2"===e?`ssd${e}`:`ssd_${e}`}async load(){this.model=await a.loadGraphModel(this.modelPath);let e=i.zeros([1,300,300,3],"int32"),m=await this.model.executeAsync(e);await Promise.all(m.map(e=>e.data())),m.map(e=>e.dispose()),e.dispose()}async infer(e,a,m){let d=i.tidy(()=>(e instanceof i.Tensor||(e=i.browser.fromPixels(e)),i.expandDims(e))),s=d.shape[1],t=d.shape[2],n=await this.model.executeAsync(d),l=n[0].dataSync(),o=n[1].dataSync();d.dispose(),i.dispose(n);let[r,p]=this.calculateMaxScores(l,n[0].shape[1],n[0].shape[2]),c=i.getBackend();"webgl"===i.getBackend()&&i.setBackend("cpu");let y=i.tidy(()=>{let e=i.tensor2d(o,[n[1].shape[1],n[1].shape[3]]);return i.image.nonMaxSuppression(e,r,a,m,m)}),b=y.dataSync();return y.dispose(),c!==i.getBackend()&&i.setBackend(c),this.buildDetectedObjects(t,s,o,r,b,p)}buildDetectedObjects(e,a,i,d,s,t){let n=s.length,l=[];for(let o=0;o<n;o++){let n=[];for(let e=0;e<4;e++)n[e]=i[4*s[o]+e];let r=n[0]*a,p=n[1]*e,c=n[2]*a,y=n[3]*e;n[0]=p,n[1]=r,n[2]=y-p,n[3]=c-r,l.push({bbox:n,class:m[t[s[o]]+1].displayName,score:d[s[o]]})}return l}calculateMaxScores(e,a,i){let m=[],d=[];for(let s=0;s<a;s++){let a=Number.MIN_VALUE,t=-1;for(let m=0;m<i;m++)e[s*i+m]>a&&(a=e[s*i+m],t=m);m[s]=a,d[s]=t}return[m,d]}async detect(e,a=20,i=.5){return this.infer(e,a,i)}dispose(){null!=this.model&&this.model.dispose()}}e.ObjectDetection=d,e.load=async function(e={}){if(null==i)throw Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");let a=e.base||"lite_mobilenet_v2",m=e.modelUrl;if(-1===["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(a))throw Error(`ObjectDetection constructed with invalid base model ${a}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);let s=new d(a,m);return await s.load(),s},e.version="2.2.3",Object.defineProperty(e,"__esModule",{value:!0})}(e.exports,m("40l72"),m("i64bB"))});var d=m("g73GA");m("iUyUN"),m("5jdc5"),(async()=>{let e=document.getElementById("webcam"),a=document.getElementById("live-view"),i=document.getElementById("demo"),m=document.getElementById("btn-enable"),s=document.getElementById("instruction-area"),t=[],n=null;async function l(a){let{target:i}=a;if(i instanceof HTMLElement)try{n=await d.load(),i.classList.add("hidden"),navigator.mediaDevices.getUserMedia({video:!0}).then(a=>{e.srcObject=a,e.onloadeddata=o}),s.classList.add("hidden")}catch(e){console.log(e)}}function o(){n&&n.detect(e).then(e=>{for(let e=0;e<t.length;e++)a.removeChild(t[e]);t.splice(0);for(let i=0;i<e.length;i++){if(e[i].score<.66)continue;let m=document.createElement("p");m.innerText=e[i].class+" - with "+Math.round(100*parseFloat(`${e[i].score}`))+"% confidence.",m.style="margin-left: "+e[i].bbox[0]+"px; margin-top: "+(e[i].bbox[1]-10)+"px; width: "+(e[i].bbox[2]-10)+"px; top: 0; left: 0;";let d=document.createElement("div");d.setAttribute("class","highlighter"),d.style="left: "+e[i].bbox[0]+"px; top: "+e[i].bbox[1]+"px; width: "+e[i].bbox[2]+"px; height: "+e[i].bbox[3]+"px;",a.appendChild(d),a.appendChild(m),t.push(d),t.push(m)}window.requestAnimationFrame(o)})}navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?(i.classList.remove("hidden"),m.addEventListener("click",l)):console.warn("getUserMedia() is not supported by your browser")})();
//# sourceMappingURL=camera-identify.0768a08b.js.map
